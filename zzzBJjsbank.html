<!DOCTYPE html>
<html>
<head>
<!--$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$-->
<style>	
#userDIV {
    border: 1px solid black;
    margin-bottom: 10px;
}	
#dealerDIV {
    border: 1px solid black;
    margin-bottom: 10px;
}	
</style>	
<!--$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$-->	
  <title>Blackjack</title>
  <script language="JavaScript">
// Mike McGrath (mike_mcgrath@lineone.net)
<!-- Begin
var card2;	  
var gameOver; var cardCount;
function Shuffle(max){
var num=Math.random()*max;
return Math.round(num)+1;
}	 
	  
function getSuit(){
suit = Shuffle(4);
if(suit == 1) return "Spades";
if(suit == 2) return "Clubs";
if(suit == 3) return "Diamonds";
else return "Hearts";
}
	  
function cardName(card){
if(card == 1) return "Ace";
if(card == 11) return "Jack";
if(card == 12) return "Queen";
if(card == 13) return "King";
return "" + card;
}
	  
function cardValue(card,strWho){                                                //biến strwho để xác định lượt
if(card == 1) {
	if(strWho =="You" && document.display.you.value >10){
	document.display.say2.value=document.display.say2.value+" Low"; return 1;}
	else return 11; }
 if(card > 10) return 10; 
return card;
}
	  
function PickACard(strWho){
card = Shuffle(12); //tại sao 12?????????????????????????????????????????????????????	
card2=cardName(card);
suit = getSuit();
if(strWho =="You")
{document.display.say2.value=(cardName(card) + " of " + suit);  //say2 là bài của người chơi
//   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 //var x = document.createElement("IMG");
 
if (card2=="Ace" && suit=="Spades"){                                       //thêm phần hiện hình quân bài
	document.getElementById("userCards").src="ace_of_spades.png";};
if (card2=="Ace" && suit=="Clubs"){
	document.getElementById("userCards").src= "ace_of_clubs.png";};
if (card2=="Ace" && suit=="Diamonds"){
	document.getElementById("userCards").src= "ace_of_diamonds.png";};
if (card2=="Ace" && suit=="Hearts"){
	document.getElementById("userCards").src= "ace_of_hearts.png";};
if (card==2 && suit=="Spades"){
	document.getElementById("userCards").src= "2_of_spades.png";};
if (card==2 && suit=="Clubs"){
	document.getElementById("userCards").src= "2_of_clubs.png";};
if (card==2 && suit=="Diamonds"){
	document.getElementById("userCards").src= "2_of_diamonds.png";};
if (card==2 && suit=="Hearts"){
	document.getElementById("userCards").src= "2_of_hearts.png";};
if (card==3 && suit=="Spades"){
	document.getElementById("userCards").src= "3_of_spades.png";};
if (card==3 && suit=="Clubs"){
	document.getElementById("userCards").src= "3_of_clubs.png";};
if (card==3 && suit=="Diamonds"){
	document.getElementById("userCards").src= "3_of_diamonds.png";};
if (card==3 && suit=="Hearts"){
	document.getElementById("userCards").src="3_of_hearts.png";};
if (card==4 && suit=="Spades"){
	document.getElementById("userCards").src= "4_of_spades.png";};
if (card==4 && suit=="Clubs"){
	document.getElementById("userCards").src= "4_of_clubs.png";};
if (card==4 && suit=="Diamonds"){
	document.getElementById("userCards").src= "4_of_diamonds.png";};
if (card==4 && suit=="Hearts"){
	document.getElementById("userCards").src= "4_of_hearts.png";};
if (card==5 && suit=="Spades"){
	document.getElementById("userCards").src= "5_of_spades.png";};
if (card==5 && suit=="Clubs"){
	document.getElementById("userCards").src= "5_of_clubs.png";};
if (card==5 && suit=="Diamonds"){
	document.getElementById("userCards").src= "5_of_diamonds.png";};
if (card==5 && suit=="Hearts"){
	document.getElementById("userCards").src="5_of_hearts.png";};
if (card==6 && suit=="Spades"){
	document.getElementById("userCards").src= "6_of_spades.png";}	;
if (card==6 && suit=="Clubs"){
	document.getElementById("userCards").src= "6_of_clubs.png";}	;
if (card==6 && suit=="Diamonds"){
	document.getElementById("userCards").src= "6_of_diamonds.png";}	;
if (card==6 && suit=="Hearts"){
	document.getElementById("userCards").src= "6_of_hearts.png";}	;
if (card==7 && suit=="Spades"){
	document.getElementById("userCards").src= "7_of_spades.png";}	;
if (card==8 && suit=="Spades"){
	document.getElementById("userCards").src= "8_of_spades.png";}	;
if (card==9 && suit=="Spades"){
	document.getElementById("userCards").src= "9_of_spades.png";}	;
if (card2==10 && suit=="Spades"){
	document.getElementById("userCards").src= "10_of_spades.png";}	;
if (card2=="Jack" && suit=="Spades"){
	document.getElementById("userCards").src= "jack_of_spades2.png";}	;
if (card2=="Queen" && suit=="Spades"){
	document.getElementById("userCards").src= "queen_of_spades2.png";}	;
if (card2=="King" && suit=="Spades"){
	document.getElementById("userCards").src= "king_of_spades2.png";}	;
if (card==7 && suit=="Clubs"){
	document.getElementById("userCards").src= "7_of_clubs.png";}	;
if (card==8 && suit=="Clubs"){
	document.getElementById("userCards").src= "8_of_clubs.png";}	;
if (card==9 && suit=="Clubs"){
	document.getElementById("userCards").src= "9_of_clubs.png";}	;
if (card2==10 && suit=="Clubs"){
	document.getElementById("userCards").src= "10_of_clubs.png";}	;
if (card2=="Jack" && suit=="Clubs"){
	document.getElementById("userCards").src= "jack_of_clubs2.png";}	;
if (card2=="Queen" && suit=="Clubs"){
	document.getElementById("userCards").src= "queen_of_clubs2.png";}	;
if (card2=="King" && suit=="Clubs"){
	document.getElementById("userCards").src= "king_of_clubs2.png";}	;
if (card2==7 && suit=="Diamonds"){
	document.getElementById("userCards").src= "7_of_diamonds.png";}	;
if (card==8 && suit=="Diamonds"){
	document.getElementById("userCards").src= "8_of_diamonds.png";}	;
if (card==9 && suit=="Diamonds"){
	document.getElementById("userCards").src= "9_of_diamonds.png";}	;
if (card2==10 && suit=="Diamonds"){
	document.getElementById("userCards").src= "10_of_diamonds.png";}	;
if (card2=="Jack" && suit=="Diamonds"){
	document.getElementById("userCards").src= "jack_of_diamonds2.png";}	;
if (card2=="Queen" && suit=="Diamonds"){
	document.getElementById("userCards").src= "queen_of_diamonds2.png";}	;
if (card2=="King" && suit=="Diamonds"){
	document.getElementById("userCards").src= "king_of_diamonds2.png";}	;
if (card2==7 && suit=="Hearts"){
	document.getElementById("userCards").src= "7_of_hearts.png";}	;
if (card==8 && suit=="Hearts"){
	document.getElementById("userCards").src= "8_of_hearts.png";}	;
if (card==9 && suit=="Hearts"){
	document.getElementById("userCards").src= "9_of_hearts.png";}	;
if (card2==10 && suit=="Hearts"){
	document.getElementById("userCards").src= "10_of_hearts.png";}	;
if (card2=="Jack" && suit=="Hearts"){
	document.getElementById("userCards").src= "jack_of_hearts2.png";}	;
if (card2=="Queen" && suit=="Hearts"){
	document.getElementById("userCards").src= "queen_of_hearts2.png";}	;
if (card2=="King" && suit=="Hearts"){
	document.getElementById("userCards").src= "king_of_hearts2.png";}	;




 
 //x.setAttribute("width", "304");
   // x.setAttribute("height", "228");
    //x.setAttribute("alt", "card");
 
 
//document.getElementById("userDIV").appendChild(x);
 
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
}
else
document.display.say1.value=(cardName(card) + " of " + suit); //say1 là bài của máy (dealer)
return cardValue(card,strWho);
}
	  
function NewHand(form){  //bắt đầu ván mới, called khi ấn DEAL
if(gameOver !=0) //gameOver là biến boolean thì phải, xem đã hết game chưa ??? bằng 0 là hết game rồi ???
{form.say1.value=("Hand in Play!"); form.say2.value=(""); return;} 
else
{form.dealer.value = 0; form.you.value = 0; cardCount=0;
form.dealer.value = eval(form.dealer.value) + PickACard("Dealer");
form.you.value = eval(form.you.value) + PickACard("You");
gameOver= -1; cardCount+=1;}
}
	  
function Dealer(form){    //function để máy bốc bài, called khi ấn 'STAND'
if (gameOver ==0)
{form.say1.value=("Deal the Cards!"); form.say2.value=(""); return;}
else
if(form.you.value<10)
{form.say1.value=("Not Below Ten!"); form.say2.value=("Take a Hit!"); return;}
else
if (cardCount <2)  //cardCount để đếm bài, tối thiểu người chơi phải có 2 quân
{form.say1.value=("Minimum 2 Cards!"); form.say2.value=("Hit Again!"); return;}
else
while(form.dealer.value < 17) 		//máy bốc liên tiếp cho đến khi có >17 điểm
{form.dealer.value = eval(form.dealer.value) + PickACard("Dealer");}
}
	  
function User(form){        //player bốc bài, called khi ấn 'HIT'
if (gameOver ==0)
{form.say1.value=("Deal the Cards!"); form.say2.value=(""); return;}
else
{cardCount+=1; form.say1.value=("You Get...");
form.you.value = eval(form.you.value) + PickACard("You");}
//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADD	
if(form.you.value==21 && cardCount==2)						//ADD :thêm 
{form.say1.value=("Blackjack! You win!");					//có blackjack
gameOver=0; form.numgames.value=eval(form.numgames.value)+1;}			//là thắng 
//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD	
if(form.you.value > 21)
{form.say1.value=("You Busted!");
gameOver=0; form.numgames.value=eval(form.numgames.value)-1;}
}
	  
function LookAtHands(form){
if (gameOver ==0 || form.you.value<10 || cardCount <2){return;}
else
if(form.dealer.value > 21) 
{form.say1.value=("House Busts!"); form.say2.value=("You Win! $$$$$$");
gameOver=0; form.numgames.value=eval(form.numgames.value)+1;}
 else
if(form.you.value > form.dealer.value)
{form.say1.value=("You Win!"); form.say2.value=("$$$$$$$$$$$$$$$");
gameOver=0; form.numgames.value=eval(form.numgames.value)+1;}
 else
 if(form.dealer.value == form.you.value)
{form.say1.value=("Game Tied!"); form.say2.value=("Try Again!");
gameOver=0; form.numgames.value=eval(form.numgames.value)-1;}
 else
{form.say1.value=("House Wins!"); form.say2.value=("Tough Luck!");
gameOver=0; form.numgames.value=eval(form.numgames.value)-1;}
}
	  
function setBj(){
gameOver=0; cardCount=0; 
document.display.dealer.value=""; 
document.display.you.value="";
document.display.numgames.value="0";
document.display.say1.value="    Hit 'Deal'";
document.display.say2.value="    To Start!";
}
window.onload = setBj;
// End -->
</script>
	
</head>

<body>
<form name="display">
<table bgcolor="#c0c0c0" border="1" cellspacing="0" cellpadding="3" align="center"> <!--thêm align="center-->
<tbody><tr>
<td><center>Score:</center></td>
<td><center>Dealer</center></td>
<td><center><input type="text" name="dealer" size="2"></center></td>
<td><center>Card(s):  <input type="text" name="say1" size="18" value=""></center></td>
</tr>
<tr>
<td><center><input type="text" name="numgames" size="3" value="0"></center></td>
<td><center>Player</center></td>
<td><center><input type="text" name="you" size="2"></center></td>
<td><center>Card(s):  <input type="text" name="say2" size="18" value=""></center></td>
</tr>
<tr>
<td><center><input type="button" value="Deal" onclick="NewHand(this.form)"></center></td> 
<td colspan="3"><center>
<input type="button" value="Stand" onclick="Dealer(this.form);LookAtHands(this.form);">  
<input type="button" value=" Hit " onclick="User(this.form)"></center></td></tr>         
</tbody>
</table>
</form>	
<!--$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$-->
<div id="userDIV">
	<p style="font-size:150%;font-family:Comic Sans MS:">Player 's cards</p>
	<img id="userCards" scr="" style="width:150px;height:200px">
</div>
<!--<div id="dealerDIV">
	 Dealer
</div>-->
	

<!--$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$-->
</body>
</html>
